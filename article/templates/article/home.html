{% extends 'article/base.html' %}

{% block title %}Главная страница{% endblock %}

{% block content %}
<h1>Система управления научными публикациями</h1>

<div class="section">
    <h2>Авторы ({{ authors.count }})</h2>
    {% for author in authors %}
        <div class="item author">
            <h3>{{ author.first_name }} {{ author.last_name }}</h3>
            <p>Возраст: {{ author.age }} | Страна: {{ author.country }}</p>
            <p>Email: {{ author.email }}</p>
        </div>
    {% empty %}
        <p>Авторы не найдены</p>
    {% endfor %}
</div>

<div class="section">
    <h2>Статьи ({{ articles.count }})</h2>
    {% for article in articles %}
        <div class="item article">
            <h3>{{ article.name }}</h3>
            <p>Создана: {{ article.created_at|date:"d.m.Y H:i" }}</p>
            <p>Авторы: 
                {% for author in article.authors.all %}
                    {{ author.first_name }} {{ author.last_name }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </p>
        </div>
    {% empty %}
        <p>Статьи не найдены</p>
    {% endfor %}
</div>

<div class="section">
    <h2>Журналы ({{ journals.count }})</h2>
    {% for journal in journals %}
        <div class="item journal">
            <h3>{{ journal.name }}</h3>
            <p>Уровень: {{ journal.get_level_display }}</p>
            <p>Издатель: {{ journal.publisher }}</p>
            <p>Дата публикации: {{ journal.publication_date|date:"d.m.Y" }}</p>
            <p>Статья: {{ journal.articles.name }}</p>
        </div>
    {% empty %}
        <p>Журналы не найдены</p>
    {% endfor %}
</div>
{% endblock %}